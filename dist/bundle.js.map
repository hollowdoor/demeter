{"version":3,"file":"bundle.js","sources":["../src/lib/messages.js","../src/lib/assertions.js","../src/lib/run_controls.js","../src/lib/def.js","../src/lib/print_controls.js","../src/lib/test.js","../src/lib/fast_reducable_queue.js","../src/index.js"],"sourcesContent":["const str = a => (\n    typeof a === 'object'\n    ? JSON.stringify(a, null, 2)\n    : a\n);\n\nconst m = fn => (message, ...values) => (\n    message\n    ? message\n    : fn(...values.map(v=>str(v)))\n);\n\nconst bool = (v, s) => typeof v === 'boolean' ? v : v + s;\n\nconst showEqual = m((a, b) => a + ' equal to ' + b);\nconst showNotEqual = m((a, b) => a + ' not equal to ' + b);\nconst showTrue = m(a => a + ' is truthy');\nconst showFalse = m(a => a + ' is falsy');\n\nexport {\n    showEqual, showNotEqual, showTrue, showFalse\n};\n","import deepEqual from 'deep-equal';\nimport * as m from './messages.js';\n\nfunction createAssertError(info = {}, passed=true){\n    let assertData = Object.keys(info).reduce((data, prop)=>{\n        return data + '  ' + prop + ': ' + info[prop] + '\\n';\n    }, '');\n\n    let message = '\\n\\n  ---\\n' + assertData + '  ...\\n';\n\n    let e = new Error(message);\n\n    e.passed = !!passed;\n    e.failed = !passed;\n\n    return e;\n}\n\nfunction isEqual(a, b, strict=true){\n    if(strict){\n        return a === b;\n    }\n    return a == b;\n}\n\nexport default class Assertions {\n    constructor(running){\n        this.running = running;\n    }\n    ok(val, message){\n\n        if(!val){\n            let err = createAssertError({\n                message: m.showFalse(message, val),\n                operator: 'ok',\n                expected: true,\n                actual: val\n            }, false);\n\n            throw err;\n        }\n    }\n    assert(val, message){\n\n        if(!val){\n            let err = createAssertError({\n                message: m.showFalse(message, val),\n                operator: 'assert',\n                expected: true,\n                actual: val\n            }, false);\n\n            throw err;\n        }\n    }\n    not(val, message){\n        if(!!val){\n            let err = createAssertError({\n                message: m.showTrue(message, val),\n                operator: 'not',\n                expected: false,\n                actual: val\n            }, false);\n\n            throw err;\n        }\n    }\n    fail(message){\n        let err = createAssertError({\n            operator: 'fail',\n        }, false);\n        throw err;\n    }\n    equal(value1, value2, message, strict){\n        if(!isEqual(value1, value2, strict)){\n        //if(value1 !== value2){\n            let err = createAssertError({\n                message: m.showNotEqual(message, value1, value2),\n                operator: 'equal',\n                expected: m.showEqual(null, value1, value2),\n                actual: m.showNotEqual(null, value1, value2)\n            }, false);\n\n            throw err;\n        }\n    }\n    notEqual(value1, value2, message, strict){\n        if(isEqual(value1, value2, strict)){\n        //if(value1 === value2){\n            let err = createAssertError(message, {\n                message: m.showEqual(message, value1, value2),\n                operator: 'notEqual',\n                expected: m.showNotEqual(null, value1, value2),\n                actual: m.showEqual(null, value1, value2)\n            }, false);\n\n            throw err;\n        }\n    }\n    reject(message=''){\n        let err = createAssertError({\n            message: message,\n            operator: 'reject',\n            expected: 'reject to not be called',\n            actual: 'reject was called'\n        }, false);\n        return Promise.reject(err);\n    }\n    deepEqual(object1, object2, message, strict = true){\n        if(!deepEqual(object1, object2, {strict})){\n            let err = createAssertError({\n                message: m.showNotEqual(message, object1, object2),\n                operator: 'deepEqual',\n                expected: m.showEqual(null, object1, object2),\n                actual: m.showNotEqual(null, object1, object2)\n            }, false);\n\n            throw err;\n        }\n    }\n}\n","import Assertions from './assertions.js';\n\nexport default class RunControls {\n    constructor(tracker, {\n        description = '',\n        count = 0,\n        plan = 1\n    } = {}){\n\n        Object.defineProperties(this, {\n            count: {value: count},\n        });\n\n        this.getResult = function(value, passed){\n            if(!!passed){\n                ++tracker.passed;\n            }else{\n                ++tracker.failed;\n            }\n\n            return {\n                description,\n                passed: !!passed,\n                failed: !passed,\n                value,\n                count\n            };\n        };\n    }\n    pass(value){\n        return this.getResult(value, true);\n    }\n    fail(value){\n        return this.getResult(value, false);\n    }\n    asserts(){\n        return new Assertions(this);\n    }\n    resolve(callback, reverse = false){\n        try{\n            let value = callback(this.asserts());\n\n            if(reverse){\n                return Promise.resolve(value)\n                .then(v=>this.fail(v))\n                .catch(e=>this.pass(e));\n            }\n\n            return Promise.resolve(value)\n            .then(v=>this.pass(v))\n            .catch(e=>this.fail(e));\n        }catch(e){\n            if(reverse){ return Promise.resolve(this.pass(e)); }\n            return Promise.resolve(this.fail(e));\n        }\n    }\n    reverse(callback){\n        return this.resolve(callback, true);\n    }\n}\n","export default function def(self, src){\n    for(let n in src){\n        if(src.hasOwnProperty(n)){\n            Object.defineProperty(self, n, {\n                value: src[n],\n                enumerable: true\n            });\n        }\n    }\n\n    return self;\n}\n","import def from './def.js';\n\nexport default class PrintControls {\n    constructor(tracker, {\n        description = '',\n        passed = true,\n        failed = true,\n        value = '',\n        count\n    } = {}){\n\n        def(this, {\n            description,\n            passed,\n            failed,\n            value,\n            count,\n            tracker\n        });\n\n        Object.defineProperty(this, 'plan', {\n            get(){\n                return tracker.plan\n            }\n        });\n    }\n    tap(){\n        let buffer = [];\n        if(this.count === 1){\n            buffer.push('TAP version 13');\n            buffer.push('1..'+this.plan);\n        }\n\n        let { description, value, count, tracker } = this;\n\n        let message = description.length ? description : '';\n        let str = '';\n        if(this.passed){\n            str = 'ok ' + count + ' - ' + message;\n        }else if(this.failed){\n            let errMessage = value ? value.message : '';\n            str = 'not ok ' + count + ' - ' + message + ' ' + errMessage;\n        }\n\n        buffer.push(str);\n\n        if(this.count === tracker.plan){\n            buffer.push('# duration '+(Date.now()-tracker.startTime) + ' ms');\n            let end = '';\n            if(tracker.passed)\n                end += '# passed '+tracker.passed;\n            if(tracker.failed)\n                end += ' failed '+tracker.failed;\n            if(end.length){\n                buffer.push(end);\n            }\n        }\n        return buffer;\n    }\n}\n","import RunControls from './run_controls.js';\nimport PrintControls from './print_controls.js';\nimport def from './def.js';\n\nexport default class Test {\n    constructor({\n        description = '',\n        run = null,\n        print = null\n    } = {}){\n\n        def(this, {\n            description\n        });\n\n        Object.defineProperty(this, 'runTest', {\n            value: function(tracker){\n\n                let running = new RunControls(tracker, {\n                    description,\n                    count: tracker.count\n                });\n\n                return Promise.resolve(run(running))\n                .then(result=>{\n                    return print(new PrintControls(tracker, result));\n                });\n            }\n        });\n    }\n}\n","export default class FastReducableQueue {\n    constructor(){\n        this.length = 0;\n    }\n    take(queue){\n        for(let i=0, len=queue.length; i<len; i++){\n            this.push(queue[i]);\n        }\n        queue.clear();\n    }\n    push(...values){\n\n        for(let i=0, len=values.length; i<len; i++){\n            this[this.length] = values[i];\n            ++this.length;\n        }\n    }\n    shift(){\n        let v = this[0], i = 0;\n        --this.length;\n        while(i < this.length){\n            this[i] = this[i+1];\n        }\n\n        return v;\n    }\n    reduce(fn, startValue){\n        let i = 0;\n        let result = startValue;\n        //console.log('this.length ', this.length)\n        while(i < this.length){\n            result = fn(result, this[i], i, this);\n            ++i;\n        }\n        return result;\n    }\n    clear(){\n        let i = -1, len = this.length;\n        while(++i < len){\n            try{\n                delete this[i];\n            }catch(e){}\n        }\n        this.length = 0;\n    }\n}\n","import Test from './lib/test.js';\nimport FastReducableQueue from './lib/fast_reducable_queue.js';\n\nexport class Demeter {\n    constructor(){\n        let self = this;\n        this.queue = new FastReducableQueue();\n\n        this.count = 0;\n        this.passed = 0;\n        this.failed = 0;\n\n        Object.defineProperty(this, 'complete', {\n            get(){\n                return self.count === self.plan;\n            }\n        });\n\n        Object.defineProperty(this, 'plan', {\n            get(){\n                return self.queue.length;\n            }\n        });\n    }\n    run(){\n\n        this.startTime = Date.now();\n\n        let pending = this.queue.reduce((p, t)=>{\n            return p.then(v=>{\n                ++this.count;\n                return t.runTest(this);\n            });\n        }, Promise.resolve());\n\n        return pending;\n    }\n    take(...holders){\n\n        holders.forEach(h=>{\n            this.queue.take(h.queue);\n        });\n\n        return this;\n    }\n    test(description, callback){\n\n        if(typeof callback === 'undefined'){\n            callback = description;\n            description = '';\n        }\n\n        let test = new Test({\n            description,\n            print(complete){\n                complete.tap().forEach(str=>{\n                    console.log(str);\n                });\n            },\n            run(controls){\n                return controls.resolve(callback);\n            }\n        });\n\n        this.queue.push(test);\n        return this;\n    }\n    reverse(description, callback){\n\n        if(typeof callback === 'undefined'){\n            callback = description;\n            description = '';\n        }\n\n        let test = new Test({\n            description,\n            print(complete){\n                complete.tap().forEach(str=>{\n                    console.log(str);\n                });\n            },\n            run(controls){\n                return controls.reverse(callback);\n            }\n        });\n\n        this.queue.push(test);\n        return this;\n    }\n}\n\nexport function test(options = {}){\n    return new Demeter(options);\n}\n"],"names":["const","let","m.showFalse","m.showTrue","m.showNotEqual","m.showEqual","this"],"mappings":"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"}