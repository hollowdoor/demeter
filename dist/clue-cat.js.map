{"version":3,"file":"clue-cat.js","sources":["../src/lib/get_test_args.js","../src/lib/assertions.js","../src/lib/run_controls.js","../src/lib/write_version.js","../node_modules/indent-string/index.js","../src/lib/print_controls.js","../node_modules/p-defer/index.js","../node_modules/delay/index.js","../src/lib/timeout.js","../src/lib/test.js","../src/index.js"],"sourcesContent":["export default function getTestArgs(description, options, callback){\n    if(typeof callback === 'undefined'){\n        if(typeof options === 'undefined'){\n            callback = description;\n            options = {};\n            description = '';\n        }else{\n            callback = options;\n        }\n    }\n    return [description, options, callback];\n}\n","function getError(message){\n    if(typeof Error !== 'undefined'){\n        return Error(message);\n    }else{\n        return message; //For really old browsers.\n    }\n}\n\nfunction createAssertError(message, info = {}, passed=true){\n    message = message ? '\\n' + message : '';\n\n    let assertData = Object.keys(info).reduce((data, prop)=>{\n        return data + '  ' + prop + ': ' + info[prop] + '\\n';\n    }, '');\n\n\n    message += '\\n  ---\\n' + assertData + '  ...\\n';\n\n\n    let e = new Error(message);\n    //console.log('PASSED ', passed);console.log(info);\n\n    e.passed = !!passed;\n    e.failed = !passed;\n    //console.log('e ', e)\n    return e;\n}\n\nexport default class Assertions {\n    assert(val, message, extra = {}){\n\n        if(!val){\n            let err = createAssertError(message, {\n                operator: 'assert',\n                expected: true,\n                actual: val\n            }, false);\n\n            throw err;\n        }\n    }\n    fail(message){\n        let err = createAssertError(message, {\n            operator: 'fail',\n        }, false);\n        throw err;\n    }\n    equal(value1, value2, message=''){\n        if(value1 !== value2){\n            let err = createAssertError(message, {\n                operator: 'equal',\n                expected: value1,\n                actual: value2\n            }, false);\n\n            throw err;\n        }\n    }\n    reject(message=''){\n        let err = createAssertError(message, {\n            operator: 'reject'\n        }, false);\n        return Promise.reject(err);\n    }\n}\n","import Assertions from './assertions.js';\n\nexport default class RunControls {\n    constructor({\n        description = '',\n        count = 0,\n        read = null,\n        rethrow = false\n    } = {}){\n\n        let pending = Promise.resolve();\n        let rethrown = false;\n\n        Object.defineProperties(this, {\n            rethrow: {value: rethrow}\n        });\n\n        this.getResult = function(value, passed){\n\n            return {\n                description,\n                passed: !!passed,\n                failed: !passed,\n                value\n            };\n        };\n\n\n        this.write = function(result){\n            if(rethrown){ return this; }\n            if(rethrow){\n                rethrown = true;\n                pending = pending.then(v=>result).then(v=>{\n\n                    if(v.value && v.value instanceof Error){\n                        return Promise.reject(\n                            new Error(\n                                '# rethrow test \\n'+v.value.message.split('\\n').join('\\n  ')+'\\n'\n                            )\n                        );\n                    }\n                    return v;\n                });\n                return this;\n            }\n\n            pending = pending.then(v=>result).then(result=>{\n                return read(result);\n            });\n\n            return this;\n        };\n\n\n        this.end = function(){\n            return pending;\n        };\n    }\n    pass(value){\n        return this.getResult(value, true);\n    }\n    fail(value){\n        return this.getResult(value, false);\n    }\n    asserts(){\n        return new Assertions();\n    }\n    toPromise(value){\n        try{\n\n            return value;\n        }catch(e){\n            return Promise.reject(e);\n        }\n    }\n    resolve(callback, reverse = false){\n        try{\n            let value = callback(this.asserts());\n            if(typeof value === 'object'){\n                let run = value['run'];\n                if(typeof run === 'function'){\n                    value = value.run(null, {rethrow: true});\n                }\n            }\n\n            if(reverse){\n                return Promise.resolve(value)\n                .then(v=>this.fail(v))\n                .catch(e=>this.pass(e));\n            }\n\n            return Promise.resolve(value)\n            .then(v=>this.pass(v))\n            .catch(e=>this.fail(e));\n        }catch(e){\n            if(reverse){ return this.pass(e); }\n            return this.fail(e);\n        }\n    }\n    reverse(callback){\n        return this.resolve(callback, true);\n    }\n}\n","const writeVersion = (()=>{\n    let g;\n    let TAP_VERSION_WRITTEN = false;\n    if(typeof global === 'undefined'){\n        g = window;\n    }else{\n        g = global;\n    }\n\n    if(typeof g['TAP_VERSION_WRITTEN'] === 'undefined'){\n        Object.defineProperty(g, 'TAP_VERSION_WRITTEN', {\n            get(){\n                return TAP_VERSION_WRITTEN;\n            }\n        });\n    }\n\n    return ()=>{\n        if(g.TAP_VERSION_WRITTEN) return;\n        console.log('TAP version 13');\n        TAP_VERSION_WRITTEN = true;\n    };\n})();\n\nexport default writeVersion;\n","'use strict';\nmodule.exports = (str, count, opts) => {\n\t// Support older versions: use the third parameter as options.indent\n\t// TODO: Remove the workaround in the next major version\n\tconst options = typeof opts === 'object' ? Object.assign({indent: ' '}, opts) : {indent: opts || ' '};\n\tcount = count === undefined ? 1 : count;\n\n\tif (typeof str !== 'string') {\n\t\tthrow new TypeError(`Expected \\`input\\` to be a \\`string\\`, got \\`${typeof str}\\``);\n\t}\n\n\tif (typeof count !== 'number') {\n\t\tthrow new TypeError(`Expected \\`count\\` to be a \\`number\\`, got \\`${typeof count}\\``);\n\t}\n\n\tif (typeof options.indent !== 'string') {\n\t\tthrow new TypeError(`Expected \\`options.indent\\` to be a \\`string\\`, got \\`${typeof options.indent}\\``);\n\t}\n\n\tif (count === 0) {\n\t\treturn str;\n\t}\n\n\tconst regex = options.includeEmptyLines ? /^/mg : /^(?!\\s*$)/mg;\n\treturn str.replace(regex, options.indent.repeat(count));\n}\n;\n","import writeVersion from './write_version.js';\nimport indent from 'indent-string';\n\nexport default class PrintControls {\n    constructor({\n        description,\n        result = {},\n        count = 0,\n        rethrow\n    } = {}){\n\n        Object.defineProperty(this, '_result', {\n            value: result\n        });\n        Object.defineProperty(this, 'count', {\n            value: count,\n            enumerable: true\n        });\n\n        this.tap = function(){\n            //writeVersion();\n            let t = this.result();\n\n            if(/^#/.test(t.description)){\n                const createDirective = (failed, result) =>{\n                    result.failed = failed;\n                    result.passed = !failed;\n                    result.value = new Error('');\n                    return result;\n                };\n                if(/^#[ ]TODO/.test(t.description)){\n                    t = createDirective(true, t);\n                }else if(/^#[ ]PASS/.test(t.description)){\n                    t = createDirective(false, t);\n                }\n            }\n\n            let message = t.description.length ? t.description : '';\n            let str = '';\n            if(t.passed){\n                str = 'ok ' + count + ' - ' + message;\n                if(t.value && t.value.message){\n                    if(/#[ ]rethrow[ ]test/.test(t.value.message)){\n                        str += indent(t.value.message, 2);\n                    }\n                }\n            }else if(t.failed){\n                let errMessage = t.value ? t.value.message : '';\n                str = 'not ok ' + count + ' - ' + message + ' ' + errMessage;\n            }\n            return str;\n        };\n    }\n    result(){\n        return this._result;\n    }\n}\n","'use strict';\nmodule.exports = () => {\n\tconst ret = {};\n\n\tret.promise = new Promise((resolve, reject) => {\n\t\tret.resolve = resolve;\n\t\tret.reject = reject;\n\t});\n\n\treturn ret;\n};\n","'use strict';\nconst defer = require('p-defer');\n\nclass CancelError extends Error {\n\tconstructor(message) {\n\t\tsuper(message);\n\t\tthis.name = 'CancelError';\n\t}\n}\n\nconst generate = willResolve => function (ms, value) {\n\tms = ms || 0;\n\tconst useValue = (arguments.length > 1);\n\tlet result = value;\n\n\tconst delaying = defer();\n\tconst promise = delaying.promise;\n\n\tlet timeout = setTimeout(() => {\n\t\tconst settle = willResolve ? delaying.resolve : delaying.reject;\n\t\tsettle(result);\n\t}, ms);\n\n\tconst thunk = thunkResult => {\n\t\tif (!useValue) {\n\t\t\tresult = thunkResult;\n\t\t}\n\t\treturn promise;\n\t};\n\n\tthunk.then = promise.then.bind(promise);\n\tthunk.catch = promise.catch.bind(promise);\n\tthunk._actualPromise = promise;\n\n\tthunk.cancel = () => {\n\t\tif (timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = null;\n\t\t\tdelaying.reject(new CancelError('Delay canceled'));\n\t\t}\n\t};\n\n\treturn thunk;\n};\n\nmodule.exports = generate(true);\nmodule.exports.reject = generate(false);\nmodule.exports.CancelError = CancelError;\n","import delay from 'delay';\nexport default function timeout(n){\n    return delay(n);\n}\n","import RunControls from './run_controls.js';\nimport PrintControls from './print_controls.js';\nimport timeout from './timeout.js';\n\nexport default class Test {\n    constructor({\n        description = '',\n        run = null,\n        print = null,\n        time = null,\n        count = 0,\n        rethrow = false\n    } = {}){\n\n        let pending = timeout(1);\n        let included = [];\n        this['@@testinstance'] = true;\n        time = time || Date.now();\n\n        Object.defineProperties(this, {\n            count: {get(){ return count; }},\n            startTime: {value: time},\n            rethrow: {value: rethrow}\n        });\n\n\n\n        Object.defineProperty(this, 'include', {\n            value: function(...plans){\n                included = included.concat(plans);\n            }\n        });\n\n        function resolve(callback, options){\n\n            if(typeof options === 'undefined'){\n                options = {};\n                options.keepTesting = true;\n                options.rethrow = false;\n            }else if(typeof options === 'boolean'){\n                let kt = options;\n                options = {};\n                options.keepTesting = kt;\n                options.rethrow = false;\n            }else if(typeof options === 'object'){\n                //console.log('options -------------- ',options)\n                if(typeof options.keepTesting === 'undefined'){\n                    options.keepTesting = true;\n                }else{\n                    options.keepTesting = !!options.keepTesting;\n                }\n\n                options.rethrow = !!options.rethrow;\n            }\n\n            let running;\n            let keepTesting = options.keepTesting;\n            let rethrow = options.rethrow;\n\n            if(run){\n\n                running = new RunControls({\n                    description,\n                    rethrow,\n                    read(result){\n                        return print(new PrintControls({\n                            result,\n                            count\n                        }));\n                    }\n                });\n\n            }\n\n            if(included.length){\n                pending = included.reduce((p, plan)=>{\n                    return p.then(v=>plan.run());\n                }, Promise.resolve());\n            }\n\n            if(run){\n                pending = pending.then(v=>run(running));\n                return pending\n                .then(v=>{\n\n                    try{\n                        if(callback){\n                            return callback(v);\n                        }\n                        return value;\n                    }catch(e){\n                        return Promise.reject(e);\n                    }\n\n                }).then(v=>{\n\n                    if(!keepTesting && !rethrow){\n                        console.log('1..' + count);\n                        console.log('# duration ' + (Date.now()-time) + 'ms');\n                    }\n\n                    return v;\n                });\n            }\n\n            if(callback){\n                return Promise.resolve().then(callback);\n            }\n\n            return Promise.resolve();\n        }\n\n        Object.defineProperty(this, 'run', {\n            value: resolve\n        });\n\n        /*Object.defineProperty(this, 'run', {\n            value: function(callback, keepTesting){\n\n                if(included.length){\n                    pending = included.reduce((p, plan)=>{\n                        return p.then(v=>plan.done());\n                    }, Promise.resolve());\n                }\n\n                if(run){\n                    pending = pending.then(v=>run(running));\n                    return pending\n                    .then(v=>{\n                        if(!keepTesting && !rethrow){\n                            console.log('1..' + count);\n                            console.log('# duration ' + (Date.now()-time) + 'ms');\n                        }\n                        try{\n                            if(callback){\n                                return callback(v);\n                            }\n                            return pending.then(a=>v);\n                        }catch(e){\n                            return Promise.reject(e);\n                        }\n\n                    });\n                }\n\n                if(callback){\n                    return Promise.resolve().then(callback);\n                }\n\n                return Promise.resolve();\n            }\n        });*/\n    }\n}\n","import getTestArgs from './lib/get_test_args.js';\nimport Test from './lib/test.js';\n\nexport class ClueCatTest extends Test {\n    constructor({\n        description = '',\n        run = null,\n        print = null,\n        time = null,\n        count = 0,\n        rethrow = false\n    } = {}){\n\n        super({\n            description,\n            run,\n            print,\n            time,\n            count,\n            rethrow\n        });\n\n    }\n    test(description, options, callback){\n        let self = this;\n\n        [description, options, callback] = getTestArgs(description, options, callback);\n\n        return new (this.constructor)({\n            description,\n            time: this.startTime,\n            count: this.count + 1,\n            rethrow: options.rethrow,\n            print(complete){\n                let output = complete.tap();\n                console.log(output);\n            },\n            run(controls){\n                return self.run(()=>{\n                    let result = controls.resolve(callback);\n                    return controls.write(result).end();\n                }, true);\n            }\n        });\n    }\n    reverse(description, options, callback){\n        let self = this;\n\n        [description, options, callback] = getTestArgs(description, options, callback);\n\n        return new (this.constructor)({\n            description,\n            time: this.startTime,\n            count: this.count + 1,\n            rethrow: options.rethrow,\n            print(complete){\n                let output = complete.tap();\n                console.log(output);\n            },\n            run(controls){\n                return self.run(()=>{\n                    let result = controls.reverse(callback);\n                    return controls.write(result).end();\n                }, true);\n            }\n        });\n    }\n}\n\nexport function test(options = {}){\n    return new ClueCatTest(options);\n}\n"],"names":["let","this","const","indent","super","defer","delay"],"mappings":"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"}