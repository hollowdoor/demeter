!function(t){"use strict";function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}function n(t,e){void 0===t&&(t={}),void 0===e&&(e=!0);var n="\n\n  ---\n"+Object.keys(t).reduce(function(e,n){return e+"  "+n+": "+t[n]+"\n"},"")+"  ...\n",r=new Error(n);return r.passed=!!e,r.failed=!e,r}function r(t,e,n){return void 0===n&&(n=!0),n?t===e:t==e}function o(t,e){for(var n in e)e.hasOwnProperty(n)&&Object.defineProperty(t,n,{value:e[n],enumerable:!0});return t}var i=e(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),u=e(function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=o?n:r).supported=n,e.unsupported=r}),s=e(function(t){function e(t){return null===t||void 0===t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function r(t,r,c){var a,p;if(e(t)||e(r))return!1;if(t.prototype!==r.prototype)return!1;if(u(t))return!!u(r)&&(t=o.call(t),r=o.call(r),s(t,r,c));if(n(t)){if(!n(r))return!1;if(t.length!==r.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==r[a])return!1;return!0}try{var f=i(t),l=i(r)}catch(t){return!1}if(f.length!=l.length)return!1;for(f.sort(),l.sort(),a=f.length-1;a>=0;a--)if(f[a]!=l[a])return!1;for(a=f.length-1;a>=0;a--)if(p=f[a],!s(t[p],r[p],c))return!1;return typeof t==typeof r}var o=Array.prototype.slice,s=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:r(t,e,n))}}),c=function(t){return"object"==typeof t?JSON.stringify(t,null,2):t},a=function(t){return function(e){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return e||t.apply(void 0,n.map(function(t){return c(t)}))}},p=a(function(t,e){return t+" equal to "+e}),f=a(function(t,e){return t+" not equal to "+e}),l=a(function(t){return t+" is truthy"}),h=a(function(t){return t+" is falsy"}),v=function(t){this.running=t};v.prototype.ok=function(t,e){if(!t)throw n({message:h(e,t),operator:"ok",expected:!0,actual:t},!1)},v.prototype.assert=function(t,e){if(!t)throw n({message:h(e,t),operator:"assert",expected:!0,actual:t},!1)},v.prototype.not=function(t,e){if(t)throw n({message:l(e,t),operator:"not",expected:!1,actual:t},!1)},v.prototype.fail=function(t){throw n({operator:"fail"},!1)},v.prototype.equal=function(t,e,o,i){if(!r(t,e,i))throw n({message:f(o,t,e),operator:"equal",expected:p(null,t,e),actual:f(null,t,e)},!1)},v.prototype.notEqual=function(t,e,o,i){if(r(t,e,i))throw n(o,{message:p(o,t,e),operator:"notEqual",expected:f(null,t,e),actual:p(null,t,e)})},v.prototype.reject=function(t){void 0===t&&(t="");var e=n({message:t,operator:"reject",expected:"reject to not be called",actual:"reject was called"},!1);return Promise.reject(e)},v.prototype.deepEqual=function(t,e,r,o){if(void 0===o&&(o=!0),!s(t,e,{strict:o}))throw n({message:f(r,t,e),operator:"deepEqual",expected:p(null,t,e),actual:f(null,t,e)},!1)};var d=function(t,e){void 0===e&&(e={});var n=e.description;void 0===n&&(n="");var r=e.count;void 0===r&&(r=0);var o=e.plan;void 0===o&&(o=1),Object.defineProperties(this,{count:{value:r}}),this.getResult=function(e,o){return o?++t.passed:++t.failed,{description:n,passed:!!o,failed:!o,value:e,count:r}}};d.prototype.pass=function(t){return this.getResult(t,!0)},d.prototype.fail=function(t){return this.getResult(t,!1)},d.prototype.asserts=function(){return new v(this)},d.prototype.resolve=function(t,e){var n=this;void 0===e&&(e=!1);try{var r=t(this.asserts());return e?Promise.resolve(r).then(function(t){return n.fail(t)}).catch(function(t){return n.pass(t)}):Promise.resolve(r).then(function(t){return n.pass(t)}).catch(function(t){return n.fail(t)})}catch(t){return e?Promise.resolve(this.pass(t)):Promise.resolve(this.fail(t))}},d.prototype.reverse=function(t){return this.resolve(t,!0)};!function(){var t,e=!1;void 0===(t="undefined"==typeof global?window:global).TAP_VERSION_WRITTEN&&Object.defineProperty(t,"TAP_VERSION_WRITTEN",{get:function(){return e}})}();var y=function(t,e){void 0===e&&(e={});var n=e.description;void 0===n&&(n="");var r=e.passed;void 0===r&&(r=!0);var i=e.failed;void 0===i&&(i=!0);var u=e.value;void 0===u&&(u=""),o(this,{description:n,passed:r,failed:i,value:u,count:e.count,tracker:t}),Object.defineProperty(this,"plan",{get:function(){return t.plan}})};y.prototype.tap=function(){var t=[];1===this.count&&(t.push("TAP version 13"),t.push("1.."+this.plan));var e=this,n=e.description,r=e.value,o=e.count,i=e.tracker,u=n.length?n:"",s="";if(this.passed?s="ok "+o+" - "+u:this.failed&&(s="not ok "+o+" - "+u+" "+(r?r.message:"")),t.push(s),this.count===i.plan){t.push("# duration "+(Date.now()-i.startTime)+" ms");var c="";i.passed&&(c+="# passed "+i.passed),i.failed&&(c+=" failed "+i.failed),c.length&&t.push(c)}return t};var g=function(t){void 0===t&&(t={});var e=t.description;void 0===e&&(e="");var n=t.run;void 0===n&&(n=null);var r=t.print;void 0===r&&(r=null),o(this,{description:e}),Object.defineProperty(this,"runTest",{value:function(t){var o=new d(t,{description:e,count:t.count});return Promise.resolve(n(o)).then(function(e){return r(new y(t,e))})}})},m=function(){this.length=0};m.prototype.take=function(t){for(var e=this,n=0,r=t.length;n<r;n++)e.push(t[n]);t.clear()},m.prototype.push=function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var r=0,o=e.length;r<o;r++)t[t.length]=e[r],++t.length},m.prototype.shift=function(){var t=this,e=this[0];for(--this.length;0<this.length;)t[0]=t[1];return e},m.prototype.reduce=function(t,e){for(var n=this,r=0,o=e;r<this.length;)o=t(o,n[r],r,n),++r;return o},m.prototype.clear=function(){for(var t=this,e=-1,n=this.length;++e<n;)try{delete t[e]}catch(t){}this.length=0};var b=function(){var t=this;this.queue=new m,this.count=0,this.passed=0,this.failed=0,Object.defineProperty(this,"complete",{get:function(){return t.count===t.plan}}),Object.defineProperty(this,"plan",{get:function(){return t.queue.length}})};b.prototype.run=function(){var t=this;return this.startTime=Date.now(),this.queue.reduce(function(e,n){return e.then(function(e){return++t.count,n.runTest(t)})},Promise.resolve())},b.prototype.take=function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];return e.forEach(function(e){t.queue.take(e.queue)}),this},b.prototype.test=function(t,e){void 0===e&&(e=t,t="");var n=new g({description:t,print:function(t){t.tap().forEach(function(t){console.log(t)})},run:function(t){return t.resolve(e)}});return this.queue.push(n),this},b.prototype.reverse=function(t,e){void 0===e&&(e=t,t="");var n=new g({description:t,print:function(t){t.tap().forEach(function(t){console.log(t)})},run:function(t){return t.reverse(e)}});return this.queue.push(n),this},t.Demeter=b,t.test=function(t){return void 0===t&&(t={}),new b(t)}}(this.demeter=this.demeter||{});
//# sourceMappingURL=demeter.min.js.map
