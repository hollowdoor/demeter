!function(t){"use strict";function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t,e){void 0===t&&(t={}),void 0===e&&(e=!0);var r="\n\n  ---\n"+Object.keys(t).reduce(function(e,r){return e+"  "+r+": "+t[r]+"\n"},"")+"  ...\n",n=new Error(r);return n.passed=!!e,n.failed=!e,n}function n(t,e,r){return void 0===r&&(r=!0),r?t===e:t==e}function o(t,e){for(var r in e)e.hasOwnProperty(r)&&Object.defineProperty(t,r,{value:e[r],enumerable:!0});return t}var i=e(function(t,e){function r(t){var e=[];for(var r in t)e.push(r);return e}(t.exports="function"==typeof Object.keys?Object.keys:r).shim=r}),u=e(function(t,e){function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function n(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=o?r:n).supported=r,e.unsupported=n}),s=e(function(t){function e(t){return null===t||void 0===t}function r(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function n(t,n,c){var a,p;if(e(t)||e(n))return!1;if(t.prototype!==n.prototype)return!1;if(u(t))return!!u(n)&&(t=o.call(t),n=o.call(n),s(t,n,c));if(r(t)){if(!r(n))return!1;if(t.length!==n.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==n[a])return!1;return!0}try{var f=i(t),l=i(n)}catch(t){return!1}if(f.length!=l.length)return!1;for(f.sort(),l.sort(),a=f.length-1;a>=0;a--)if(f[a]!=l[a])return!1;for(a=f.length-1;a>=0;a--)if(p=f[a],!s(t[p],n[p],c))return!1;return typeof t==typeof n}var o=Array.prototype.slice,s=t.exports=function(t,e,r){return r||(r={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?r.strict?t===e:t==e:n(t,e,r))}}),c=function(t){return"object"==typeof t?JSON.stringify(t,null,2):t},a=function(t){return function(e){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];return e||t.apply(void 0,r.map(function(t){return c(t)}))}},p=a(function(t,e){return t+" equal to "+e}),f=a(function(t,e){return t+" not equal to "+e}),l=a(function(t){return t+" is truthy"}),h=a(function(t){return t+" is falsy"}),v=function(t){this.running=t};v.prototype.ok=function(t,e){if(!t)throw r({message:h(e,t),operator:"ok",expected:!0,actual:t},!1)},v.prototype.assert=function(t,e){if(!t)throw r({message:h(e,t),operator:"assert",expected:!0,actual:t},!1)},v.prototype.not=function(t,e){if(t)throw r({message:l(e,t),operator:"not",expected:!1,actual:t},!1)},v.prototype.fail=function(t){throw r({operator:"fail"},!1)},v.prototype.equal=function(t,e,o,i){if(!n(t,e,i))throw r({message:f(o,t,e),operator:"equal",expected:p(null,t,e),actual:f(null,t,e)},!1)},v.prototype.notEqual=function(t,e,o,i){if(n(t,e,i))throw r(o,{message:p(o,t,e),operator:"notEqual",expected:f(null,t,e),actual:p(null,t,e)})},v.prototype.reject=function(t){void 0===t&&(t="");var e=r({message:t,operator:"reject",expected:"reject to not be called",actual:"reject was called"},!1);return Promise.reject(e)},v.prototype.deepEqual=function(t,e,n,o){if(void 0===o&&(o=!0),!s(t,e,{strict:o}))throw r({message:f(n,t,e),operator:"deepEqual",expected:p(null,t,e),actual:f(null,t,e)},!1)};var d=function(t,e){void 0===e&&(e={});var r=e.description;void 0===r&&(r="");var n=e.count;void 0===n&&(n=0);var o=e.plan;void 0===o&&(o=1),Object.defineProperties(this,{count:{value:n}}),this.getResult=function(e,o){return o?++t.passed:++t.failed,{description:r,passed:!!o,failed:!o,value:e,count:n}}};d.prototype.pass=function(t){return this.getResult(t,!0)},d.prototype.fail=function(t){return this.getResult(t,!1)},d.prototype.asserts=function(){return new v(this)},d.prototype.resolve=function(t,e){var r=this;void 0===e&&(e=!1);try{var n=t(this.asserts());return e?Promise.resolve(n).then(function(t){return r.fail(t)}).catch(function(t){return r.pass(t)}):Promise.resolve(n).then(function(t){return r.pass(t)}).catch(function(t){return r.fail(t)})}catch(t){return e?Promise.resolve(this.pass(t)):Promise.resolve(this.fail(t))}},d.prototype.reverse=function(t){return this.resolve(t,!0)};var y=function(t,e){void 0===e&&(e={});var r=e.description;void 0===r&&(r="");var n=e.passed;void 0===n&&(n=!0);var i=e.failed;void 0===i&&(i=!0);var u=e.value;void 0===u&&(u=""),o(this,{description:r,passed:n,failed:i,value:u,count:e.count,tracker:t}),Object.defineProperty(this,"plan",{get:function(){return t.plan}})};y.prototype.tap=function(){var t=[];1===this.count&&(t.push("TAP version 13"),t.push("1.."+this.plan));var e=this,r=e.description,n=e.value,o=e.count,i=e.tracker,u=r.length?r:"",s="";if(this.passed?s="ok "+o+" - "+u:this.failed&&(s="not ok "+o+" - "+u+" "+(n?n.message:"")),t.push(s),this.count===i.plan){t.push("# duration "+(Date.now()-i.startTime)+" ms");var c="";i.passed&&(c+="# passed "+i.passed),i.failed&&(c+=" failed "+i.failed),c.length&&t.push(c)}return t};var g=function(t){void 0===t&&(t={});var e=t.description;void 0===e&&(e="");var r=t.run;void 0===r&&(r=null);var n=t.print;void 0===n&&(n=null),o(this,{description:e}),Object.defineProperty(this,"runTest",{value:function(t){var o=new d(t,{description:e,count:t.count});return Promise.resolve(r(o)).then(function(e){return n(new y(t,e))})}})},m=function(){this.length=0};m.prototype.take=function(t){for(var e=this,r=0,n=t.length;r<n;r++)e.push(t[r]);t.clear()},m.prototype.push=function(){for(var t=this,e=[],r=arguments.length;r--;)e[r]=arguments[r];for(var n=0,o=e.length;n<o;n++)t[t.length]=e[n],++t.length},m.prototype.shift=function(){var t=this,e=this[0];for(--this.length;0<this.length;)t[0]=t[1];return e},m.prototype.reduce=function(t,e){for(var r=this,n=0,o=e;n<this.length;)o=t(o,r[n],n,r),++n;return o},m.prototype.clear=function(){for(var t=this,e=-1,r=this.length;++e<r;)try{delete t[e]}catch(t){}this.length=0};var b=function(){var t=this;this.queue=new m,this.count=0,this.passed=0,this.failed=0,Object.defineProperty(this,"complete",{get:function(){return t.count===t.plan}}),Object.defineProperty(this,"plan",{get:function(){return t.queue.length}})};b.prototype.run=function(){var t=this;return this.startTime=Date.now(),this.queue.reduce(function(e,r){return e.then(function(e){return++t.count,r.runTest(t)})},Promise.resolve())},b.prototype.take=function(){for(var t=this,e=[],r=arguments.length;r--;)e[r]=arguments[r];return e.forEach(function(e){t.queue.take(e.queue)}),this},b.prototype.test=function(t,e){void 0===e&&(e=t,t="");var r=new g({description:t,print:function(t){t.tap().forEach(function(t){console.log(t)})},run:function(t){return t.resolve(e)}});return this.queue.push(r),this},b.prototype.reverse=function(t,e){void 0===e&&(e=t,t="");var r=new g({description:t,print:function(t){t.tap().forEach(function(t){console.log(t)})},run:function(t){return t.reverse(e)}});return this.queue.push(r),this},t.Demeter=b,t.test=function(t){return void 0===t&&(t={}),new b(t)}}(this.demeter=this.demeter||{});
//# sourceMappingURL=demeter.min.js.map
