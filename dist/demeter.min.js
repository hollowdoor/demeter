!function(t){"use strict";function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t,e){void 0===t&&(t={}),void 0===e&&(e=!0);var r="\n\n  ---\n"+Object.keys(t).reduce(function(e,r){return e+"  "+r+": "+t[r]+"\n"},"")+"  ...\n",n=new Error(r);return n.passed=!!e,n.failed=!e,n}function n(t,e,r){return void 0===r&&(r=!0),r?t===e:t==e}function o(t,e){for(var r in e)e.hasOwnProperty(r)&&Object.defineProperty(t,r,{value:e[r],enumerable:!0});return t}var i=e(function(t,e){function r(t){var e=[];for(var r in t)e.push(r);return e}(t.exports="function"==typeof Object.keys?Object.keys:r).shim=r}),u=e(function(t,e){function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function n(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=o?r:n).supported=r,e.unsupported=n}),s=e(function(t){function e(t){return null===t||void 0===t}function r(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function n(t,n,a){var c,p;if(e(t)||e(n))return!1;if(t.prototype!==n.prototype)return!1;if(u(t))return!!u(n)&&(t=o.call(t),n=o.call(n),s(t,n,a));if(r(t)){if(!r(n))return!1;if(t.length!==n.length)return!1;for(c=0;c<t.length;c++)if(t[c]!==n[c])return!1;return!0}try{var l=i(t),f=i(n)}catch(t){return!1}if(l.length!=f.length)return!1;for(l.sort(),f.sort(),c=l.length-1;c>=0;c--)if(l[c]!=f[c])return!1;for(c=l.length-1;c>=0;c--)if(p=l[c],!s(t[p],n[p],a))return!1;return typeof t==typeof n}var o=Array.prototype.slice,s=t.exports=function(t,e,r){return r||(r={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?r.strict?t===e:t==e:n(t,e,r))}}),a=function(t){return"object"==typeof t?JSON.stringify(t,null,2):t},c=function(t){return function(e){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];return e||t.apply(void 0,r.map(function(t){return a(t)}))}},p=c(function(t,e){return t+" equal to "+e}),l=c(function(t,e){return t+" not equal to "+e}),f=c(function(t){return t+" is truthy"}),h=c(function(t){return t+" is falsy"}),v=function(t){this.running=t};v.prototype.ok=function(t,e){if(!t)throw r({message:h(e,t),operator:"ok",expected:!0,actual:t},!1)},v.prototype.assert=function(t,e){if(!t)throw r({message:h(e,t),operator:"assert",expected:!0,actual:t},!1)},v.prototype.not=function(t,e){if(t)throw r({message:f(e,t),operator:"not",expected:!1,actual:t},!1)},v.prototype.fail=function(t){throw r({operator:"fail"},!1)},v.prototype.equal=function(t,e,o,i){if(!n(t,e,i))throw r({message:l(o,t,e),operator:"equal",expected:p(null,t,e),actual:l(null,t,e)},!1)},v.prototype.notEqual=function(t,e,o,i){if(n(t,e,i))throw r(o,{message:p(o,t,e),operator:"notEqual",expected:l(null,t,e),actual:p(null,t,e)})},v.prototype.reject=function(t){void 0===t&&(t="");var e=r({message:t,operator:"reject",expected:"reject to not be called",actual:"reject was called"},!1);return Promise.reject(e)},v.prototype.deepEqual=function(t,e,n,o){if(void 0===o&&(o=!0),!s(t,e,{strict:o}))throw r({message:l(n,t,e),operator:"deepEqual",expected:p(null,t,e),actual:l(null,t,e)},!1)};var d=function(t,e){void 0===e&&(e={});var r=e.description;void 0===r&&(r="");var n=e.count;void 0===n&&(n=0);var o=e.plan;void 0===o&&(o=1),Object.defineProperties(this,{count:{value:n}}),this.getResult=function(e,o){return o?++t.passed:++t.failed,{description:r,passed:!!o,failed:!o,value:e,count:n}}};d.prototype.pass=function(t){return this.getResult(t,!0)},d.prototype.fail=function(t){return this.getResult(t,!1)},d.prototype.asserts=function(){return new v(this)},d.prototype.resolve=function(t,e){var r=this;void 0===e&&(e=!1);try{var n=t(this.asserts());return e?Promise.resolve(n).then(function(t){return r.fail(t)}).catch(function(t){return r.pass(t)}):Promise.resolve(n).then(function(t){return r.pass(t)}).catch(function(t){return r.fail(t)})}catch(t){return e?Promise.resolve(this.pass(t)):Promise.resolve(this.fail(t))}},d.prototype.reverse=function(t){return this.resolve(t,!0)};!function(){var t,e=!1;void 0===(t="undefined"==typeof global?window:global).TAP_VERSION_WRITTEN&&Object.defineProperty(t,"TAP_VERSION_WRITTEN",{get:function(){return e}})}();var y=function(t,e){void 0===e&&(e={});var r=e.description;void 0===r&&(r="");var n=e.passed;void 0===n&&(n=!0);var i=e.failed;void 0===i&&(i=!0);var u=e.value;void 0===u&&(u="");var s=e.count;o(this,{description:r,passed:n,failed:i,value:u,count:s}),Object.defineProperty(this,"startTime",{get:function(){return t.startTime}}),Object.defineProperty(this,"plan",{get:function(){return t.plan}}),this.tap=function(){var e=this;1===s&&(console.log("TAP version 13"),console.log("1.."+this.plan));var o=r.length?r:"",a="";if(n)a="ok "+s+" - "+o;else if(i){var c=u?u.message:"";a="not ok "+s+" - "+o+" "+c}return s===t.plan&&setTimeout(function(){t.startTime&&(console.log("# duration "+(Date.now()-e.startTime)+" ms"),t.passed&&console.log("# passed "+t.passed),t.failed&&console.log("# failed "+t.failed))}),a}},g=function(t,e){void 0===e&&(e={});var r=e.description;void 0===r&&(r="");var n=e.run;void 0===n&&(n=null);var i=e.print;void 0===i&&(i=null),o(this,{description:r}),Object.defineProperty(this,"run",{value:function(e){void 0===e&&(e={});var o=e.count;void 0===o&&(o=1);var u=e.plan;void 0===u&&(u=1),Object.defineProperty(this,"plan",{value:u});var s=new d(t,{description:r,count:o,plan:u});return Promise.resolve(n(s)).then(function(e){return i(new y(t,e))})}})},m=function(){this.length=0};m.prototype.take=function(){for(var t=this,e=[],r=arguments.length;r--;)e[r]=arguments[r];for(var n=0;n<e.length;n++){for(var o=0;o<e[n].length;o++)t.push(e[n][o]);e[n].clear()}},m.prototype.push=function(){for(var t=this,e=[],r=arguments.length;r--;)e[r]=arguments[r];if(0===this.length)for(var n=0;n<50;n++)t[n]={};for(var o=0;o<e.length;o++)t[t.length]=e[o],++t.length},m.prototype.shift=function(){var t=this,e=this[0];for(--this.length;0<this.length;)t[0]=t[1];return e},m.prototype.reduce=function(t,e){for(var r=this,n=0,o=e;n<this.length;)o=t(o,r[n],n,r),++n;return o},m.prototype.clear=function(){for(var t=this;0<this.length;)try{delete t[0]}catch(t){}this.length=0};var b=function(){var t=this,e=this.queue=new m;this.count=0,this.passed=0,this.failed=0,Object.defineProperty(this,"complete",{get:function(){return t.count===t.plan}}),Object.defineProperty(this,"plan",{get:function(){return e.length}})};b.prototype.run=function(){var t=this;return this.startTime=Date.now(),this.queue.reduce(function(e,r){return e.then(function(e){++t.count,r.run(t)})},Promise.resolve())},b.prototype.take=function(){for(var t=this,e=[],r=arguments.length;r--;)e[r]=arguments[r];for(var n=0;n<e.length;n++){for(var o=e[n].queue,i=0;i<o.length;)t.queue.push(o[i]),++i;e[n].queue=null}return this},b.prototype.test=function(t,e){void 0===e&&(e=t,t="");var r=new g(this,{description:t,startTime:this.startTime,print:function(t){var e=t.tap();console.log(e)},run:function(t){return t.resolve(e)}});return this.queue.push(r),this},b.prototype.reverse=function(t,e){void 0===e&&(e=t,t="");var r=new g(this,{description:t,startTime:this.startTime,print:function(t){var e=t.tap();console.log(e)},run:function(t){return t.reverse(e)}});return this.queue.push(r),this},t.Demeter=b,t.test=function(t){return void 0===t&&(t={}),new b(t)}}(this.demeter=this.demeter||{});
//# sourceMappingURL=demeter.min.js.map
