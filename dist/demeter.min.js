!function(t){"use strict";function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}function n(t,e){void 0===t&&(t={}),void 0===e&&(e=!0);var n="\n\n  ---\n"+Object.keys(t).reduce(function(e,n){return e+"  "+n+": "+t[n]+"\n"},"")+"  ...\n",r=new Error(n);return r.passed=!!e,r.failed=!e,r}function r(t,e,n){return void 0===n&&(n=!0),n?t===e:t==e}var o=e(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),i=e(function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=o?n:r).supported=n,e.unsupported=r}),u=e(function(t){function e(t){return null===t||void 0===t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function r(t,r,s){var c,l;if(e(t)||e(r))return!1;if(t.prototype!==r.prototype)return!1;if(i(t))return!!i(r)&&(t=u.call(t),r=u.call(r),a(t,r,s));if(n(t)){if(!n(r))return!1;if(t.length!==r.length)return!1;for(c=0;c<t.length;c++)if(t[c]!==r[c])return!1;return!0}try{var p=o(t),f=o(r)}catch(t){return!1}if(p.length!=f.length)return!1;for(p.sort(),f.sort(),c=p.length-1;c>=0;c--)if(p[c]!=f[c])return!1;for(c=p.length-1;c>=0;c--)if(l=p[c],!a(t[l],r[l],s))return!1;return typeof t==typeof r}var u=Array.prototype.slice,a=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:r(t,e,n))}}),a=function(t){return"object"==typeof t?JSON.stringify(t,null,2):t},s=function(t){return function(e){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return e||t.apply(void 0,n.map(function(t){return a(t)}))}},c=s(function(t,e){return t+" equal to "+e}),l=s(function(t,e){return t+" not equal to "+e}),p=s(function(t){return t+" is truthy"}),f=s(function(t){return t+" is falsy"}),v=function(t){this.running=t};v.prototype.ok=function(t,e){if(!t)throw n({message:f(e,t),operator:"ok",expected:!0,actual:t},!1)},v.prototype.assert=function(t,e){if(!t)throw n({message:f(e,t),operator:"assert",expected:!0,actual:t},!1)},v.prototype.not=function(t,e){if(t)throw n({message:p(e,t),operator:"not",expected:!1,actual:t},!1)},v.prototype.fail=function(t){throw n({operator:"fail"},!1)},v.prototype.equal=function(t,e,o,i){if(!r(t,e,i))throw n({message:l(o,t,e),operator:"equal",expected:c(null,t,e),actual:l(null,t,e)},!1)},v.prototype.notEqual=function(t,e,o,i){if(r(t,e,i))throw n(o,{message:c(o,t,e),operator:"notEqual",expected:l(null,t,e),actual:c(null,t,e)})},v.prototype.reject=function(t){void 0===t&&(t="");var e=n({message:t,operator:"reject",expected:"reject to not be called",actual:"reject was called"},!1);return Promise.reject(e)},v.prototype.deepEqual=function(t,e,r,o){if(void 0===o&&(o=!0),!u(t,e,{strict:o}))throw n({message:l(r,t,e),operator:"deepEqual",expected:c(null,t,e),actual:l(null,t,e)},!1)};var h=function(t){void 0===t&&(t={});var e=t.description;void 0===e&&(e="");var n=t.count;void 0===n&&(n=0);var r=t.plan;void 0===r&&(r=1);t.time;Object.defineProperties(this,{count:{value:n},plan:{value:r}}),this.getResult=function(t,o){return{description:e,passed:!!o,failed:!o,value:t,count:n,plan:r}}};h.prototype.pass=function(t){return this.getResult(t,!0)},h.prototype.fail=function(t){return this.getResult(t,!1)},h.prototype.asserts=function(){return new v(this)},h.prototype.resolve=function(t,e){var n=this;void 0===e&&(e=!1);try{var r=t(this.asserts());return e?Promise.resolve(r).then(function(t){return n.fail(t)}).catch(function(t){return n.pass(t)}):Promise.resolve(r).then(function(t){return n.pass(t)}).catch(function(t){return n.fail(t)})}catch(t){return e?Promise.resolve(this.pass(t)):Promise.resolve(this.fail(t))}},h.prototype.reverse=function(t){return this.resolve(t,!0)};!function(){var t,e=!1;void 0===(t="undefined"==typeof global?window:global).TAP_VERSION_WRITTEN&&Object.defineProperty(t,"TAP_VERSION_WRITTEN",{get:function(){return e}})}();var d=function(t){void 0===t&&(t={});var e=t.description;void 0===e&&(e="");var n=t.passed;void 0===n&&(n=!0);var r=t.failed;void 0===r&&(r=!0);var o=t.value;void 0===o&&(o="");var i=t.count,u=t.plan;void 0===u&&(u=1);var a=t.subTest;void 0===a&&(a=null),Object.defineProperties(this,{description:{value:e},passed:{value:n},failed:{value:r},value:{value:o},count:{value:i}}),this.tap=function(){1===i&&(console.log("TAP version 13"),console.log("1.."+u));var t=e.length?e:"",a="";if(n)a="ok "+i+" - "+t;else if(r){var s=o?o.message:"";a="not ok "+i+" - "+t+" "+s}return i===u&&setTimeout(function(){console.log("# done")}),a}},y=function(t){void 0===t&&(t={});var e=t.description;void 0===e&&(e="");var n=t.run;void 0===n&&(n=null);var r=t.print;void 0===r&&(r=null);var o=t.time;void 0===o&&(o=null);var i=t.plan;void 0===i&&(i=1),Object.defineProperties(this,{description:{value:e},time:{value:o||Date.now()}}),Object.defineProperty(this,"resolve",{value:function(t){void 0===t&&(t={});var r=t.count;void 0===r&&(r=1);var o=t.plan,i=new h({description:e,count:r,plan:o});return Promise.resolve(n(i))}}),Object.defineProperty(this,"run",{value:function(t){void 0===t&&(t={});var e=t.count;void 0===e&&(e=1);var n=t.plan;return this.resolve({count:e,plan:n}).then(function(t){return r(new d(t))})}})},g=function(){this.length=0};g.prototype.take=function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var r=0;r<e.length;r++){for(var o=0;o<e[r].length;o++)t.push(e[r][o]);e[r].clear()}},g.prototype.push=function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===this.length)for(var r=0;r<50;r++)t[r]={};for(var o=0;o<e.length;o++)t[t.length]=e[o],++t.length},g.prototype.shift=function(){var t=this,e=this[0];for(--this.length;0<this.length;)t[0]=t[1];return e},g.prototype.reduce=function(t,e){for(var n=this,r=0,o=e;r<this.length;)o=t(o,n[r],r,n),++r;return o},g.prototype.clear=function(){for(var t=this;0<this.length;)try{delete t[0]}catch(t){}this.length=0};var m=function(){var t=this.queue=new g;this.count=0,Object.defineProperty(this,"plan",{get:function(){return t.length}})};m.prototype.run=function(){var t=this,e=Date.now();return this.queue.reduce(function(e,n){return e.then(function(e){return n.run({count:++t.count,plan:t.plan})})},Promise.resolve()).then(function(t){console.log("# duration "+(Date.now()-e)+"ms")})},m.prototype.take=function(){for(var t=this,e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var r=0;r<e.length;r++){for(var o=e[r].queue,i=0;i<o.length;)t.queue.push(o[i]),++i;e[r].queue=null}return this},m.prototype.test=function(t,e){void 0===e&&(e=t,t="");var n=new y({description:t,time:this.startTime,print:function(t){var e=t.tap();console.log(e)},run:function(t){return t.resolve(e)}});return this.queue.push(n),this},m.prototype.reverse=function(t,e){void 0===e&&(e=t,t="");var n=new y({description:t,time:this.startTime,print:function(t){var e=t.tap();console.log(e)},run:function(t){return t.reverse(e)}});return this.queue.push(n),this},t.Demeter=m,t.test=function(t){return void 0===t&&(t={}),new m(t)}}(this.demeter=this.demeter||{});
//# sourceMappingURL=demeter.min.js.map
