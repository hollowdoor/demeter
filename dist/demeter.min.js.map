{"version":3,"file":"demeter.min.js","sources":["../src/lib/assertions.js","../src/lib/def.js","../node_modules/deep-equal/lib/keys.js","../node_modules/deep-equal/lib/is_arguments.js","../node_modules/deep-equal/index.js","../src/lib/messages.js","../src/lib/run_controls.js","../src/lib/write_version.js","../src/lib/print_controls.js","../src/lib/test.js","../src/lib/fast_reducable_queue.js","../src/index.js"],"sourcesContent":["import deepEqual from 'deep-equal';\nimport * as m from './messages.js';\n\nfunction createAssertError(info = {}, passed=true){\n    let assertData = Object.keys(info).reduce((data, prop)=>{\n        return data + '  ' + prop + ': ' + info[prop] + '\\n';\n    }, '');\n\n    let message = '\\n\\n  ---\\n' + assertData + '  ...\\n';\n\n    let e = new Error(message);\n\n    e.passed = !!passed;\n    e.failed = !passed;\n\n    return e;\n}\n\nfunction isEqual(a, b, strict=true){\n    if(strict){\n        return a === b;\n    }\n    return a == b;\n}\n\nexport default class Assertions {\n    constructor(running){\n        this.running = running;\n    }\n    ok(val, message){\n\n        if(!val){\n            let err = createAssertError({\n                message: m.showFalse(message, val),\n                operator: 'ok',\n                expected: true,\n                actual: val\n            }, false);\n\n            throw err;\n        }\n    }\n    assert(val, message){\n\n        if(!val){\n            let err = createAssertError({\n                message: m.showFalse(message, val),\n                operator: 'assert',\n                expected: true,\n                actual: val\n            }, false);\n\n            throw err;\n        }\n    }\n    not(val, message){\n        if(!!val){\n            let err = createAssertError({\n                message: m.showTrue(message, val),\n                operator: 'not',\n                expected: false,\n                actual: val\n            }, false);\n\n            throw err;\n        }\n    }\n    fail(message){\n        let err = createAssertError({\n            operator: 'fail',\n        }, false);\n        throw err;\n    }\n    equal(value1, value2, message, strict){\n        if(!isEqual(value1, value2, strict)){\n        //if(value1 !== value2){\n            let err = createAssertError({\n                message: m.showNotEqual(message, value1, value2),\n                operator: 'equal',\n                expected: m.showEqual(null, value1, value2),\n                actual: m.showNotEqual(null, value1, value2)\n            }, false);\n\n            throw err;\n        }\n    }\n    notEqual(value1, value2, message, strict){\n        if(isEqual(value1, value2, strict)){\n        //if(value1 === value2){\n            let err = createAssertError(message, {\n                message: m.showEqual(message, value1, value2),\n                operator: 'notEqual',\n                expected: m.showNotEqual(null, value1, value2),\n                actual: m.showEqual(null, value1, value2)\n            }, false);\n\n            throw err;\n        }\n    }\n    reject(message=''){\n        let err = createAssertError({\n            message: message,\n            operator: 'reject',\n            expected: 'reject to not be called',\n            actual: 'reject was called'\n        }, false);\n        return Promise.reject(err);\n    }\n    deepEqual(object1, object2, message, strict = true){\n        if(!deepEqual(object1, object2, {strict})){\n            let err = createAssertError({\n                message: m.showNotEqual(message, object1, object2),\n                operator: 'deepEqual',\n                expected: m.showEqual(null, object1, object2),\n                actual: m.showNotEqual(null, object1, object2)\n            }, false);\n\n            throw err;\n        }\n    }\n}\n","export default function def(self, src){\n    for(let n in src){\n        if(src.hasOwnProperty(n)){\n            Object.defineProperty(self, n, {\n                value: src[n],\n                enumerable: true\n            });\n        }\n    }\n\n    return self;\n}\n","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n","const str = a => (\n    typeof a === 'object'\n    ? JSON.stringify(a, null, 2)\n    : a\n);\n\nconst m = fn => (message, ...values) => (\n    message\n    ? message\n    : fn(...values.map(v=>str(v)))\n);\n\nconst bool = (v, s) => typeof v === 'boolean' ? v : v + s;\n\nconst showEqual = m((a, b) => a + ' equal to ' + b);\nconst showNotEqual = m((a, b) => a + ' not equal to ' + b);\nconst showTrue = m(a => a + ' is truthy');\nconst showFalse = m(a => a + ' is falsy');\n\nexport {\n    showEqual, showNotEqual, showTrue, showFalse\n};\n","import Assertions from './assertions.js';\n\nexport default class RunControls {\n    constructor(tracker, {\n        description = '',\n        count = 0,\n        plan = 1\n    } = {}){\n\n        Object.defineProperties(this, {\n            count: {value: count},\n        });\n\n        this.getResult = function(value, passed){\n            if(!!passed){\n                ++tracker.passed;\n            }else{\n                ++tracker.failed;\n            }\n\n            return {\n                description,\n                passed: !!passed,\n                failed: !passed,\n                value,\n                count\n            };\n        };\n    }\n    pass(value){\n        return this.getResult(value, true);\n    }\n    fail(value){\n        return this.getResult(value, false);\n    }\n    asserts(){\n        return new Assertions(this);\n    }\n    resolve(callback, reverse = false){\n        try{\n            let value = callback(this.asserts());\n\n            if(reverse){\n                return Promise.resolve(value)\n                .then(v=>this.fail(v))\n                .catch(e=>this.pass(e));\n            }\n\n            return Promise.resolve(value)\n            .then(v=>this.pass(v))\n            .catch(e=>this.fail(e));\n        }catch(e){\n            if(reverse){ return Promise.resolve(this.pass(e)); }\n            return Promise.resolve(this.fail(e));\n        }\n    }\n    reverse(callback){\n        return this.resolve(callback, true);\n    }\n}\n","const writeVersion = (()=>{\n    let g;\n    let TAP_VERSION_WRITTEN = false;\n    if(typeof global === 'undefined'){\n        g = window;\n    }else{\n        g = global;\n    }\n\n    if(typeof g['TAP_VERSION_WRITTEN'] === 'undefined'){\n        Object.defineProperty(g, 'TAP_VERSION_WRITTEN', {\n            get(){\n                return TAP_VERSION_WRITTEN;\n            }\n        });\n    }\n\n    return ()=>{\n        if(g.TAP_VERSION_WRITTEN) return;\n        console.log('TAP version 13');\n        TAP_VERSION_WRITTEN = true;\n    };\n})();\n\nexport default writeVersion;\n","import writeVersion from './write_version.js';\nimport indent from 'indent-string';\nimport def from './def.js';\n\nexport default class PrintControls {\n    constructor(tracker, {\n        description = '',\n        passed = true,\n        failed = true,\n        value = '',\n        count\n    } = {}){\n\n        def(this, {\n            description,\n            passed,\n            failed,\n            value,\n            count,\n            tracker\n        });\n\n        /*Object.defineProperty(this, 'startTime', {\n            get(){\n                return tracker.startTime\n            }\n        });*/\n\n        Object.defineProperty(this, 'plan', {\n            get(){\n                return tracker.plan\n            }\n        });\n\n        /*this.tap = function(){\n\n            if(count === 1){\n                console.log('TAP version 13');\n                console.log('1..'+this.plan);\n            }\n\n            let message = description.length ? description : '';\n            let str = '';\n            if(passed){\n                str = 'ok ' + count + ' - ' + message;\n            }else if(failed){\n                let errMessage = value ? value.message : '';\n                str = 'not ok ' + count + ' - ' + message + ' ' + errMessage;\n            }\n\n            if(count === tracker.plan){\n\n                setTimeout(()=>{\n                    if(!tracker.startTime) return;\n                    console.log('# duration '+(Date.now()-this.startTime) + ' ms');\n                    let end = '';\n                    if(tracker.passed)\n                        end += '# passed '+tracker.passed;\n                    if(tracker.failed)\n                        end += ' failed '+tracker.failed;\n                    if(end.length){\n                        console.log(end);\n                    }\n                });\n            }\n            return str;\n        };*/\n    }\n    tap(){\n        let buffer = [];\n        if(this.count === 1){\n            buffer.push('TAP version 13');\n            buffer.push('1..'+this.plan);\n        }\n\n        let { description, value, count, tracker } = this;\n\n        let message = description.length ? description : '';\n        let str = '';\n        if(this.passed){\n            str = 'ok ' + count + ' - ' + message;\n        }else if(this.failed){\n            let errMessage = value ? value.message : '';\n            str = 'not ok ' + count + ' - ' + message + ' ' + errMessage;\n        }\n\n        buffer.push(str);\n        //console.log('----------count', this.count);\n        //console.log('----------plan ', tracker.plan);\n        //console.log('----------tracker.queue.length',tracker.queue.length)\n\n        if(this.count === tracker.plan){\n            //let tracker = this.tracker;\n            buffer.push('# duration '+(Date.now()-tracker.startTime) + ' ms');\n            let end = '';\n            if(tracker.passed)\n                end += '# passed '+tracker.passed;\n            if(tracker.failed)\n                end += ' failed '+tracker.failed;\n            if(end.length){\n                buffer.push(end);\n            }\n        }\n        return buffer;\n    }\n}\n","import RunControls from './run_controls.js';\nimport PrintControls from './print_controls.js';\nimport def from './def.js';\n\nexport default class Test {\n    constructor({\n        description = '',\n        run = null,\n        print = null\n    } = {}){\n\n        def(this, {\n            description\n        });\n\n        Object.defineProperty(this, 'runTest', {\n            value: function(tracker){\n\n                let running = new RunControls(tracker, {\n                    description,\n                    count: tracker.count\n                });\n\n                return Promise.resolve(run(running))\n                .then(result=>{\n                    return print(new PrintControls(tracker, result));\n                });\n            }\n        });\n    }\n}\n","export default class FastReducableQueue {\n    constructor(){\n        this.length = 0;\n    }\n    take(queue){\n        for(let i=0, len=queue.length; i<len; i++){\n            this.push(queue[i]);\n        }\n        queue.clear();\n    }\n    push(...values){\n\n        for(let i=0, len=values.length; i<len; i++){\n            this[this.length] = values[i];\n            ++this.length;\n        }\n    }\n    shift(){\n        let v = this[0], i = 0;\n        --this.length;\n        while(i < this.length){\n            this[i] = this[i+1];\n        }\n\n        return v;\n    }\n    reduce(fn, startValue){\n        let i = 0;\n        let result = startValue;\n        //console.log('this.length ', this.length)\n        while(i < this.length){\n            result = fn(result, this[i], i, this);\n            ++i;\n        }\n        return result;\n    }\n    clear(){\n        let i = -1, len = this.length;\n        while(++i < len){\n            try{\n                delete this[i];\n            }catch(e){}\n        }\n        this.length = 0;\n    }\n}\n","import getTestArgs from './lib/get_test_args.js';\nimport Test from './lib/test.js';\nimport FastReducableQueue from './lib/fast_reducable_queue.js';\n\nexport class Demeter {\n    constructor(){\n        let self = this;\n        this.queue = new FastReducableQueue();\n\n        this.count = 0;\n        this.passed = 0;\n        this.failed = 0;\n\n        Object.defineProperty(this, 'complete', {\n            get(){\n                return self.count === self.plan;\n            }\n        });\n\n        Object.defineProperty(this, 'plan', {\n            get(){\n                return self.queue.length;\n            }\n        });\n    }\n    run(){\n\n        //console.log('this ', this)\n\n        this.startTime = Date.now();\n\n        //console.log('this.queue.length ',this.queue.length)\n\n        let pending = this.queue.reduce((p, t)=>{\n            return p.then(v=>{\n                ++this.count;\n                return t.runTest(this);\n            });\n        }, Promise.resolve());\n\n        return pending;\n    }\n    take(...holders){\n\n        holders.forEach(h=>{\n            this.queue.take(h.queue);\n        });\n\n        /*for(let j=0; j<holders.length; j++){\n            let queue = holders[j].queue;\n            let i = 0;\n            while(i < queue.length){\n                this.queue.push(queue[i]);\n                ++i;\n            }\n            holders[j].queue = null;\n        }*/\n\n        return this;\n    }\n    test(description, callback){\n\n        if(typeof callback === 'undefined'){\n            callback = description;\n            description = '';\n        }\n\n        let test = new Test({\n            description,\n            print(complete){\n                //let output = complete.tap();\n                //console.log(output);\n                complete.tap().forEach(str=>{\n                    console.log(str);\n                });\n            },\n            run(controls){\n                return controls.resolve(callback);\n            }\n        });\n\n        this.queue.push(test);\n        return this;\n    }\n    reverse(description, callback){\n\n        if(typeof callback === 'undefined'){\n            callback = description;\n            description = '';\n        }\n\n        let test = new Test({\n            description,\n            print(complete){\n                //let output = complete.tap();\n                //console.log(output);\n                complete.tap().forEach(str=>{\n                    console.log(str);\n                });\n            },\n            run(controls){\n                return controls.reverse(callback);\n            }\n        });\n\n        this.queue.push(test);\n        return this;\n    }\n}\n\nexport function test(options = {}){\n    return new Demeter(options);\n}\n"],"names":["createAssertError","info","passed","let","message","Object","keys","reduce","data","prop","e","Error","failed","isEqual","a","b","strict","def","self","src","n","hasOwnProperty","defineProperty","value","enumerable","shim","obj","key","push","module","supported","object","prototype","toString","call","unsupported","length","propertyIsEnumerable","supportsArgumentsClass","arguments","exports","isUndefinedOrNull","undefined","isBuffer","x","copy","slice","objEquiv","opts","i","isArguments","pSlice","deepEqual","ka","objectKeys","kb","sort","Array","actual","expected","Date","getTime","str","JSON","stringify","m","fn","values","map","v","showEqual","showNotEqual","showTrue","showFalse","Assertions","running","this","ok","val","m.showFalse","operator","assert","not","m.showTrue","fail","equal","value1","value2","m.showNotEqual","m.showEqual","notEqual","reject","err","Promise","object1","object2","RunControls","tracker","ref","defineProperties","count","getResult","description","pass","asserts","resolve","callback","reverse","then","catch","g","TAP_VERSION_WRITTEN","global","window","get","const","PrintControls","plan","tap","buffer","now","startTime","end","Test","run","result","print","FastReducableQueue","take","queue","len","this$1","clear","shift","startValue","Demeter","p","t","runTest","holders","forEach","h","test","complete","console","log","controls","options"],"mappings":"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"}